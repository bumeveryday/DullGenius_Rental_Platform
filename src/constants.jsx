// src/constants.js
// 최종 수정일: 2026.01.28
// 설명: 앱 전역에서 사용되는 상수 정의 (텍스트, 설정, 상태 코드 등)

// ==========================================
// [NEW] 상태 코드 ENUM
// ==========================================
export const STATUS = {
  AVAILABLE: { ko: '대여가능', en: 'AVAILABLE', color: '#2ecc71' },
  RENTED: { ko: '대여중', en: 'RENTED', color: '#3498db' },
  RESERVED: { ko: '찜', en: 'RESERVED', color: '#f1c40f' },
  LOST: { ko: '분실', en: 'LOST', color: '#95a5a6' },
  MAINTENANCE: { ko: '수리중', en: 'MAINTENANCE', color: '#95a5a6' },
  // [NEW] 호환성 및 V2 상태값
  RESERVED_V2: { ko: '예약됨', en: 'RESERVED', color: '#f1c40f' },
  RENTED_V2: { ko: '대여중', en: 'RENTED', color: '#e74c3c' },      // 대여중 (Red)
  RENTED_NO_STOCK: { ko: '대여중', en: 'RENTED', color: '#e74c3c' } // 재고 없음 (Red)
};

// [NEW] 기본 학기 설정 (시스템 전반에서 fallback으로 사용)
export const DEFAULT_SEMESTER = '2025-1';

// 헬퍼 함수: 영문 -> 한글
export const statusToKorean = (enStatus) => {
  const found = Object.values(STATUS).find(s => s.en === enStatus);
  return found ? found.ko : enStatus;
};

// 헬퍼 함수: 한글 -> 영문
export const koreanToStatus = (koStatus) => {
  const found = Object.values(STATUS).find(s => s.ko === koStatus);
  return found ? found.en : koStatus;
};

// 헬퍼 함수: 상태 색상 가져오기
export const getStatusColor = (status) => {
  // 한글이든 영문이든 매칭
  const found = Object.values(STATUS).find(s => s.ko === status || s.en === status);
  return found ? found.color : '#95a5a6';
};

export const TEXTS = {


  /*
  1. 부원용 로그인 / 로그아웃 기능 추가
  2. 언제가 기한 마감인지 확인 / 보증금, 벌금 관련 정책 확정
  3. 덜지 부원과 비 부원 관련 안내 추가하기
  4. 보드게임 추가 신청 구글 폼 추가하기
  5. 대여중일 때 조회랑 그냥 조회 를 로그 value로 나눠서 좋은 정보를 얻기
  6. 이벤트 탭 만들어서 대회 신청이나 동아리 단위 / 단체 단위 대여 받기
  7. 다른 사람들 대여한 것에 찜 가능하도록 만들기 
  
  */


  // 1. 메인 화면: 이용 안내 배너
  MAIN_GUIDE: `📢 덜지니어스 대여소 이용 안내
[3초 요약: 대여하는 법]
1. 🔍 **검색/카테고리**에서 원하는 게임 찾기
2. ⚡ **'찜하기'** 버튼 클릭 (30분간 유효)
3. 🏃 **동아리방 방문** 후 키오스크로 '대여 확정'

**덜지니어스 부원이 되면 학기 내내 무제한 대여!**
(상단 '🚀 부원 가입 신청하기' 버튼을 눌러보세요)

1. 로그인 필수
- 대여를 위해 로그인이 필요합니다!
- 아직 부원이 아니라면? 상단 '회원가입' 진행 후 부원비를 납부해주세요.

2. 똑똑하게 예약하고 수령하기
- '찜하기'를 누르면 30분간 게임을 선점할 수 있습니다.
- 30분 내에 동아리방(학관 2층 231호) 키오스크에서 **수령 인증**을 해야 최종 대여가 완료됩니다.

3. 반납 및 에티켓
- 반납 기한: 다음날 저녁 12시까지
- 반납 방법: 동아리방 키오스크(태블릿) 이용
- 구성품 확인 필수! 파손/분실 시 꼭 신고해주세요. (자진 신고 시 정상 참작)
`,


  // 2. 상세 페이지: 예약 모달 안내 문구
  MODAL_GUIDE:
    `💡 예약 전 필독!
- 예약 버튼을 누르면 찜 상태가 되어 30분간 대여의 우선권을 가집니다.
- 30분 내에 수령하지 않으면 찜이 자동 취소됩니다.
- 대여 중 발생한 분실/파손은 대여자에게 책임이 있습니다.`,


  // 3. 상세 페이지: 책임 배상 동의 문구 (체크박스 옆)
  AGREEMENT_LABEL:
    `(필수) 대여 중 파손 및 분실 발생 시, 2주 이내에 동일 제품 또는 구매가의 최대 4배로 배상하는 것에 동의합니다.`,

  // 4. 관리자 페이지: 로그인 안내
  ADMIN_LOGIN_MSG: `관리자 페이지 접근을 위해 암호를 입력해주세요.`,

  // 5. 관리자 페이지: 현장 대여 관련 메시지
  ADMIN_RENT_PROMPT: `[${"{gameName}"}] 현장 대여자 이름(전화번호)을 입력하세요.\n예: 김철수(010-1234-5678)`,

  ADMIN_RENT_CONFIRM_HeadsUp: `[${"{gameName}"}] 대여 처리하시겠습니까?\n\n입력값: ${"{renterName}"}`,
  ADMIN_RENT_CONFIRM_SUCCESS: `\n회원 매칭 성공! (ID: ${"{userId}"})`,
  ADMIN_RENT_CONFIRM_FAIL: `\n회원 매칭 실패 (단순 텍스트로 기록됩니다)`,

  ADMIN_RENT_SUCCESS: `대여 처리되었습니다.`,

  // 6. 사용자 모달 및 알림 메시지 (LoginModal, GameDetail)
  USER_MODAL_TITLE: "🎲 찜하기",
  USER_MODAL_DESC: `<b>${"{gameName}"}</b>의 대여 예약을 진행합니다.<br />분실/파손 시 책임이 발생할 수 있습니다.`,

  USER_MODAL_LOGGED_IN_DESC: `✨ 로그인된 계정으로 대여합니다.<br />30분이 지나면 예약이 취소되니, <br />늦기 전에 동아리방에서 수령해가세요!`,

  USER_MODAL_GUEST_INFO_LOADED: "⚡ 이전에 입력한 정보를 불러왔습니다.",
  // [Modified] 회원가입 강제 안내 문구
  MODAL_SIGNUP_PROMO: `로그인이 필요한 서비스입니다.<br/>상단의 회원가입 버튼을 눌러 부원 인증을 먼저 진행해주세요.<br/>원활한 대여를 위해 1인 1계정을 필수로 하고 있습니다.`,

  // 버튼 텍스트
  BTN_CANCEL: "취소",
  BTN_RENT_NOW: "찜하기",
  BTN_RENT_LOGIN_REQUIRED: "로그인 후 대여", // [New]
  BTN_RENT_LOADING: "진행중...", // [New]

  // 알림 메시지 (Alerts)
  ALERT_INFO_REQUIRED: "정보를 모두 입력해주세요.",
  ALERT_PASSWORD_REQUIRED: "비밀번호를 입력해주세요.",
  ALERT_AUTH_FAIL: "로그인/회원가입 실패: ",
  ALERT_AUTH_ERROR: "처리 중 오류가 발생했습니다: ",

  // GameDetail 알림
  ALERT_RENT_SUCCESS: "예약 완료! 30분 내에 수령해주세요.",
  ALERT_MISS_CONFIRM: "이 게임을 하고 싶으셨나요? 운영진에게 수요를 알릴까요?",
  ALERT_MISS_SUCCESS: "📩 전달되었습니다! 다음 구매 때 참고할게요.",
  ALERT_REVIEW_SUCCESS: "✨ 리뷰가 등록되었습니다!",
  ALERT_REVIEW_DELETE_SUCCESS: "🗑️ 리뷰가 삭제되었습니다.",

  RENTAL_RULE:
    `
1. 용어 정리
  1.1 '덜지니어스 내부의 대여'는 다음을 의미한다.
    1. 대여 시스템 '덜지니어스 대여소', 'DullGi Near Us'을 통한 대여
    2. 임원단과의 접촉으로부터 이루어진 동아리/단체간의 대여
    3. 덜지니어스가 보유한 보드게임의 대여
    4. 개인(이하 소유자)이 함께 플레이함을 목표로 동아리에 남긴 대여 
  
  1.2 '덜지니어스가 보유한 보드게임'이란 다음을 의미한다.
    1. 개인 소유 보드게임 : 덜지니어스에 개인 소유의 보드게임을 함께 플레이할 수 있도록 동아리에 대여해준 보드게임이다.
    2. 덜지니어스 명의의 보드게임 : 2022년 이전 덜지니어스가 보유하고 있던 보드게임, 개인이 기증해준 보드게임 및, 덜지니어스의 회비로 구매한 보드게임이 해당된다.
    3. 개인 소유 보드게임의 회수 및 대여는 보드게임 소유자의 의견을 우선시하며, 주인이 응답하지 못하는 경우에는 사용/대여를 허가한다.

  1.3 운영진이란 다음을 의미한다.
    1. 동아리의 회장, 부회장, 총무 (이하 임원단)
    2. 임원단이 보드게임의 대여, 관리를 목적으로 지명한 인원 일체 (이하 관리자)

  1.4 덜지니어스 부원 (이하 부원) 이란 다음을 의미한다. 
    1. 임원단이 정한 절차에 맞게 동아리에 신청하여, 부원 자격을 인정받은 자.
    2. 매 해 임원단이 정한 회비를 납부한 자.
    3. 장기 활동, 보드게임 기증 등 동아리에 기여한 바를 임원단에 인정받은 자. 
    4. 회칙으로 정한 조건으로 인해 제명당하지 않은 자.


2. 대여
  
  2.1 보드게임의 대여
  보드게임을 대여할 때는 대여 플랫폼 [덜지니어스 대여소]를 활용함을 원칙으로 한다. 
    1. 부원은 동아리에 있는 모든 보드게임을 빌릴 수 있다.
    2. 소유자가 있는 보드게임의 경우, 해당 인물에게 연락을 취한 뒤 동의를 받은 후 대여함을 원칙으로 한다.   
    3. 소유자가 응답하지 않는 상황이라면 보드게임을 가져갈 수 있으나, 소유자의 반납 요청이 있을 시 대여자는 가능한 빠르게 보드게임을 반납해야 한다.
    
  2.1. 대여의 불허 
    다음과 같은 상황에서는 대여의 순서를 조정하거나 일시적으로 대여를 불허한다.
    1. 개인 소유 보드게임을 소유자 본인이 사용하는 경우
    2. 사랑의 마라톤, 새섬위원회, 축제 기간 등 교내 행사 및 공익적 목적 사용의 경우. (이하 공익 대여)
      2-1 공익적 목적 사용의 기준은, 임원단의 내부 회의를 그 근거로 하며, 그 사실을 이해관계 당사자에게 알려야 한다. 
    3. 
    
  2.2 대여의 기간.
    본 동아리의 기본 보드게임 대여 기간은 대여 인원과 그 대상에 따라 달라진다.
    1. 운영단을 포함한 부원의 대여
       보드게임의 대여는 1박 2일을 원칙으로 하며, 빌린 다음날 저녁 12시까지 보드게임을 반납하여야 한다. *벌금
    2. 공익 대여
      단체 대여의 경우 기간의 제한 없이 보드게임을 대여해줄 수 있다. 더불어, 필요하다 판단될 시 기간의 연장을 신청할 수 있다.
      그러나, 공익 대여가 부원들이 보드게임을 대여할 수 있는 권리를 침해할 수 있고, 보드게임 파손의 염려가 있기에, 임원단은 다음과 같은 정보를 요청할 수 있다.
      1. 행사의 개요
      2. 일정 계획
      3. 예상 보드게임 플레이어 
      공익 대여의 경우, 대여와 반납의 기간을 명확하게 공지하여, 부원의 불만을 최소화하여야 한다.
  
    3. 보드게임의 반납은 동아리에 보드게임을 가져다 두고, 동아리 내 태블릿으로 반납 처리를 누르는 것으로서 인증된다.
      
  2.3 대여 연장.
  다음의 경우 그 기간을 연장할 수 있다.
    1. 2.1번의 사유로 대여한 보드게임의 기간을 정한 연장
    2. 부원 개인이 대여 기간의 연장을 신청한 경우. 이 경우 반납 제한 다음 날 저녁 12시까지 최대 두 번 대여 기간의 연장을 신청할 수 있다.
    3. 이미 연체된 보드게임에 대한 대여 연장 신청은 불가능하다.

    두 연장의 요청 모두 2.1 대여의 불허 조건을 만족할 경우 거부될 수 있으며, 연장 거부 사실을 몰랐더라도, 반납이 늦어진 기간에 비례해 벌금이 주어질 수 있다 *벌금


3. 보드게임의 파손
    1. 보고의 의무
    보드게임 대여 혹은 플레이 중 파손이 발생한 경우, 즉시 웹사이트 내 '보드게임 파손 신고' 기능을 활용해 보고하여야 한다.
    운영진에 보고가 되지 않은 파손을 발견한 경우, 운영진은 파손 정도와 관계 없이 '현물 배상의 원칙'을 통해 배상을 요구할 수 있다.
    보고가 정상적으로 접수된 경우, 운영진은 후술할 현물 배상 / 현금 배상의 원칙으로 배상을 요구할 수 있다.


    2. 동아리의 보드게임에 대해, 다음의 해를 입힌 경우를 파손으로 정하고, 동아리의 운영진은 심의를 통해 정한 배상을 회칙에 근거해 요구할 수 있다.
      1. 악취, 박스/카드 손상 등 미관상의 문제
      2. 컴포넌트의 분실, 파손
      3. 스티커 등 반영구적 컴포넌트의 합의되지 않은 사용(단, 지도 제작자들, 디크립토 등 반 영구적 소모를 원칙으로 하는 보드게임은 예외로 둔다.)
      4. 보드게임의 분실
      5. 이 외 운영진의 심의로서 정해지는 바

    3. 소유자가 있는 보드게임의 파손 기준은 소유자의 기준으로 정하고, 당사자간의 대화를 통해, 배상을 회칙에 맞게 요구할 수 있다.



4. 배상 
  4.1 현물 배상의 원칙 (우선 적용)
    배상 보드게임의 파손 및 분실에 대한 배상은 '동일 제품으로의 현물 배상'을 최우선 원칙으로 한다. 
    현금 배상은 현물을 구할 수 없거나, 파손 정도가 미미한 등 특수한 경우에 한하여 운영진의 승인 하에 진행한다.

    파손 혹은 분실이 발생한 보드게임의 경우, 동일한 상품을 구매하여 동아리에 반납해야 한다.
    절판 등의 사유로 신제품 구매가 불가능할 경우, 운영진의 검수 하에 '상급' 이상의 중고 제품으로 대체할 수 있다.
    중고 제품으로 배상할 경우, 기존 동아리 보유분보다 상태가 현저히 나쁠 시 운영진은 배상을 거부하고 재구매를 요구할 수 있다.

  4.2 현금 배상 
    현금 배상은 다음의 세 경우에 한하여 적용되며, 단순 변심이나 귀찮음을 이유로 현금 배상을 선택할 수 없다.
    1. 구매 불가능 보드게임: 절판되어 시중에서 구할 수 없는 경우, 최초 구매가(원가)의 200%~400% 범위 내에서 운영진이 책정한 금액을 배상한다. (프리미엄 고려)
    2. 부분 파손에 대한 보상금: 게임 진행에는 지장이 없으나 미관상 손해를 입힌 경우(박스 백화, 찢어짐 등). 이 경우 **현재 온라인 최저가의 30%~50%**를 동아리에 납부한다.
    3. 구매 가능하나 현금 배상을 희망하는 경우: 부득이한 사정으로 대여자가 직접 구매가 어려워 운영진에게 구매를 위탁하는 경우, 현재 온라인 최저가 + 배송비 + 5,000원을 배상해야 한다.
    4. 어떠한 경우에도 현금 배상은 보드게임 원가의 400%를 넘을 수 없다.

  4.3 배상의 항소 및 처리
    
    동아리 소유 보드게임의 배상 판정에 불만이 있을 경우 운영진에게 재심의를 요청할 수 있다.
    운영진은 정당한 파손/분실 보고 절차를 통해 보고되었고, 보드게임을 진행할 수 없을 수준의 파손이 아니라면, 무리한 전액 배상보다는 부분 파손 보상금(4.2의 2항)을 우선적으로 고려하여 부원의 부담을 줄여야 한다.

5. 벌금
  부원과 외부인 모두 보드게임 연체에 따른 벌금을 부과할 수 있다.
    1. 외부인의 경우에는 연체 1일 시 보증금
    2. 추후 추가 예정
    `
};

// [NEW] 인증 에러 메시지 번역 헬퍼
export const getAuthErrorMessage = (error) => {
  if (!error) return "";
  // error가 객체일 수도, 문자열일 수도 있음
  const msg = (error.message || error).toString();

  if (msg.includes("Invalid login credentials")) return "학번 또는 비밀번호가 올바르지 않습니다.";
  if (msg.includes("Email not confirmed")) return "이메일 인증이 완료되지 않았습니다.";
  if (msg.includes("User not found")) return "가입되지 않은 학번입니다.";
  if (msg.includes("Password should be")) return "비밀번호는 6자 이상이어야 합니다.";
  if (msg.includes("weak_password")) return "비밀번호가 너무 쉽습니다.";
  if (msg.includes("User already registered")) return "이미 가입된 학번입니다.";

  return "오류가 발생했습니다: " + msg;
};
